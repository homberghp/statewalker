<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Thu Nov 02 15:38:47 CET 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>nl.fontys.sebivenlo.statewalker (SEBIVenlo :: Statewalker 2.1 API)</title>
<meta name="date" content="2017-11-02">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="nl.fontys.sebivenlo.statewalker (SEBIVenlo :: Statewalker 2.1 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../nl/fontys/sebivenlo/statewalker/package-summary.html">Package</a></li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li>Next&nbsp;Package</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?nl/fontys/sebivenlo/statewalker/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;nl.fontys.sebivenlo.statewalker</h1>
<div class="docSummary">
<div class="block">A Java 8 enum based state machine implementation of the <strong>GoF State</strong>
 pattern.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../nl/fontys/sebivenlo/statewalker/Device.html" title="interface in nl.fontys.sebivenlo.statewalker">Device</a>&lt;C extends <a href="../../../../nl/fontys/sebivenlo/statewalker/ContextBase.html" title="class in nl.fontys.sebivenlo.statewalker">ContextBase</a>&lt;C,D,S&gt;,D extends <a href="../../../../nl/fontys/sebivenlo/statewalker/Device.html" title="interface in nl.fontys.sebivenlo.statewalker">Device</a>&lt;C,D,S&gt;,S extends <a href="../../../../nl/fontys/sebivenlo/statewalker/StateBase.html" title="interface in nl.fontys.sebivenlo.statewalker">StateBase</a>&lt;C,D,S&gt;&gt;</td>
<td class="colLast">
<div class="block">This empty interface should be extended or implemented to provide the type
 that is used by the context and or state to operate the device.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../nl/fontys/sebivenlo/statewalker/StateBase.html" title="interface in nl.fontys.sebivenlo.statewalker">StateBase</a>&lt;C extends <a href="../../../../nl/fontys/sebivenlo/statewalker/ContextBase.html" title="class in nl.fontys.sebivenlo.statewalker">ContextBase</a>&lt;C,D,S&gt;,D extends <a href="../../../../nl/fontys/sebivenlo/statewalker/Device.html" title="interface in nl.fontys.sebivenlo.statewalker">Device</a>&lt;C,D,S&gt;,S extends <a href="../../../../nl/fontys/sebivenlo/statewalker/StateBase.html" title="interface in nl.fontys.sebivenlo.statewalker">StateBase</a>&lt;C,D,S&gt;&gt;</td>
<td class="colLast">
<div class="block">Methods that should be available in all states to make the state walker api
 work.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../nl/fontys/sebivenlo/statewalker/ContextBase.html" title="class in nl.fontys.sebivenlo.statewalker">ContextBase</a>&lt;C extends <a href="../../../../nl/fontys/sebivenlo/statewalker/ContextBase.html" title="class in nl.fontys.sebivenlo.statewalker">ContextBase</a>&lt;C,D,S&gt;,D extends <a href="../../../../nl/fontys/sebivenlo/statewalker/Device.html" title="interface in nl.fontys.sebivenlo.statewalker">Device</a>&lt;C,D,S&gt;,S extends <a href="../../../../nl/fontys/sebivenlo/statewalker/StateBase.html" title="interface in nl.fontys.sebivenlo.statewalker">StateBase</a>&lt;C,D,S&gt;&gt;</td>
<td class="colLast">
<div class="block">Base class for all statewalker state machine contexts.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package nl.fontys.sebivenlo.statewalker Description">Package nl.fontys.sebivenlo.statewalker Description</h2>
<div class="block">A Java 8 enum based state machine implementation of the <strong>GoF State</strong>
 pattern.

 <p>The package is designed with ease of use and type safety in mind, and
 therefor can not completely avoid the complexity that goes with it. The
 complexity left for the user is declaring the application specific Context,
 Device, and State as a trisome in the generic declaration. To even further
 reduce the complexity, the user is advised to declare State as an
 intermediate interface that adds the application specific methods.
 <br>
 This library requires Java &ge; Java 8.
 </p>


 <p>In the example, app, the declarations of AppContext, AppDevice, and AppState
 could then be as follows:</p>
 <pre>
 <code>
 class AppContext extends ContextBase&lt;AppContext, AppDevice, State&gt;
 class AppDevice implements Device&lt;AppContext, AppDevice, State&gt;
 interface State extends StateBase&lt;AppContext, AppDevice, State&gt;
 enum AppState implements State

 </code>
 </pre>


 <p>When declaring your classes in this way you will by definition have some
 cyclic dependencies, which cannot be avoided really easily, so it might take
 some effort to convince the compiler it is okay. It may help to temporarily
 turn off the IDE feature to compile on save.</p>


 <p>The standard use is also shown in the class diagram below, where the
 app-package is the users application package. The <code>&lt;C,D,S,&gt;</code> generic
 tokens should be understood as alphabetic mnemonics for Context, Device and
 State.</p>

 <img src='doc-files/statewalker.svg' alt='statewalker usage class diagram'>
 <br>
 <h2>Implementation detail.</h2>


 <p>The classes have been designed to reduce
 complexity as much as possible, in particular using the generic annotation
 needed.</p>

 <p>This applies more to the use of the package then to the package it self,
 which cannot avoid some unchecked warnings in its implementation. In the
 implementation some use of <code>@SuppresWarnings("unchecked")</code> cannot be
 avoided, because we use arrays as internal storage and the varargs parameters
 list is an array too. We consider using <code>varargs</code> to be applicable here. If the
 user considers that wasteful in the sense of array object creation, he is
 advised to declare static constants of type array of state and use these
 values as parameter in the transition implementing methods. This will work
 exactly as intended, and has the benefit that the array allocation is done
 only once, at class loading time.
 </p>
 <h2>Transition types</h2>
 State walker provides the following transition types:

 <h3>simple transition</h3>
 <img src='doc-files/_1.svg'  alt='simple transistion' >

 <pre>
 <code>
   A {
      @Override
      public void e( Context ctx ) {
          ctx.changeFromToState( "e", this, B );
      }
   }
 </code>
 </pre>

 <h3>Transition to sub-state</h3>
 <img src='doc-files/_2.svg'  alt='simple transistion' >
 <br>
 Note how the target states are passed in super-sub order.
 <pre>
 <code>
   A {
      @Override
      public void e( Context ctx ) {
          ctx.changeFromToState( "e", this, B1, B2 );
      }
   }
 </code>
 </pre>

 <h3>Transition from sub-state</h3>
 <img src='doc-files/_3a.svg'  alt='simple transistion' ><br>
 Note that the super state (A1) of A2 is mentioned in the transition call, not <b>this</b>.
 <pre>
 <code>
   A2 {
      @Override
      public void e( Context ctx ) {
          ctx.changeFromToState( "e", A1, B );
      }
   }
 </code>
 </pre>

 <h3>Transition from super-state</h3>
 <img src='doc-files/_3b.svg'  alt='simple transistion' ><br>
 Note that this transition is implemented in super state A1, so <b>this</b> is applicable here as
 it refers to that super state.
 call.
 <pre>
 <code>
   A1 {
      @Override
      public void e( Context ctx ) {
          ctx.changeFromToState( "e", this, B );
      }
   }
 </code>
 </pre>

 <h3>Transition to sub-state implemented in super state</h3>
 <img src='doc-files/_5.svg'  alt='simple transistion' ><br>
 Note the use of the innerTranstion call, which only affects sub-states.

 <pre>
 <code>
   B1 {
       @Override
 public void e( Context ctx ) {
 ctx.innerTransition( "e", this, B22 );
 }
 }
 </code>
 </pre>

 <h3>Transition to sub-state implemented in super state</h3>
 <img src='doc-files/_6.svg'  alt='simple transistion' ><br>
 Initials states are specified and implemented with a map lookup in the state
 enum source file. At initialisation, ContextBase calls the
 <code>getInitialState()</code> once to create its own mapping. Note that the map
 lookup is an implementation detail that avoids having to overwrite the
 <code>getInitialState()</code> method in every state. The map used is an enum-map
 which has O(1) lookup properties, like an array access.

 <pre>
 <code>
   A1 {
      @Override
 public void e( Context ctx ) {
 ctx.changeFromToState( "e", this, B1 );
 }
 }

 private static final EnumMap &lt;S, S&gt; initialMap = new EnumMap &lt;&gt;( S.class );

 static {
 initialMap.put( NULL, SI );
 initialMap.put( B1, B2 );
 }

  @Override
 public State getInitialState() {
 return initialMap.get( this );
 }
 </code>
 </pre>

 <h3>Shallow and Deep History</h3>
 Deep and shallow history are implemented with sets and two methods
 that do a lookup in these sets. Both sets (different names of course) are implemented as
 follows:
 <pre>
 <code>
  private static final EnumSet &lt;S&gt; isHist = EnumSet. &lt;S&gt;of( B1 );
  // with lookup
    @Override
    public boolean isInitialStateHistory() {
        return isHist.contains( this );
    }
 </code>
 </pre>

 With this mapping (and lookup by the ContextBase) the state implementation is
 the same as in the examples with initial states. The initial states map is
 also used in this case, taking the states that the history pseudo state
 points at as value and the super state of the construct as the key.
 <br>
 Diagrams:<br>
 <img src='doc-files/_7.svg'  alt='simple transistion' ><br>
 shallow history.<br>
 <img src='doc-files/_8.svg'  alt='simple transistion' ><br>
 deep history.
 <hr></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Pieter van den Hombergh, Jeroen Beulen, Sander Lemans</dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../nl/fontys/sebivenlo/statewalker/package-summary.html">Package</a></li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li>Next&nbsp;Package</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?nl/fontys/sebivenlo/statewalker/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2017. All rights reserved.</small></p>
</body>
</html>
